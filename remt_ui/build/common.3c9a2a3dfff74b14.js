"use strict";(self.webpackChunkremt_ui=self.webpackChunkremt_ui||[]).push([[592],{2538:(I,E,t)=>{t.d(E,{X:()=>U});var r=t(5412),m=t(5892),e=t(4650),v=t(9653),P=t(1213),A=t(6467),C=t(9201),h=t(5496),p=t(6895),f=t(4859),D=t(5004);function Z(_,g){if(1&_){const d=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(d);const l=e.oxw();return e.KtG(l.deleteCaretaker())}),e._UZ(1,"i",9),e._uU(2,"Delete Caretaker "),e.qZA()}}function T(_,g){if(1&_){const d=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(d);const l=e.oxw();return e.KtG(l.deleteUser())}),e._UZ(1,"i",9),e._uU(2,"Delete User "),e.qZA()}}let U=(()=>{var _;class g{constructor(n,l,b,a,c,s,o){this.dialogData=n,this.dialog=l,this.store=b,this.userEntityService=a,this.houseEntityService=c,this.msg=s,this.storageService=o}deleteUser(){return this.userEntityService.delete(this.dialogData.data._id).subscribe({next:n=>{this.dialog.closeAll(),this.dialogData.data._id===this.storageService.getId()&&this.store.dispatch((0,m.kS)()),history.back(),this.msg.message({title:"Delete Success",text:"Successfully removed "+this.dialogData.data.userInfos.name,color:"green"})},error:n=>{this.msg.message({title:"Delete Failure",text:"Error "+n.message,color:"red"})}})}deleteCaretaker(){console.log("houseId ",this.dialogData.estate._id),console.log("caretakerId ",this.dialogData.caretakerId)}}return(_=g).\u0275fac=function(n){return new(n||_)(e.Y36(r.WI),e.Y36(r.uw),e.Y36(v.yh),e.Y36(P.W),e.Y36(A.k),e.Y36(C.e),e.Y36(h.V))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-confirm"]],decls:14,vars:7,consts:[["mat-dialog-title","",1,"card-title"],[1,"card-text"],[1,"card"],[1,"card-body"],["align","end",1,"card-footer"],["mat-raised-button","","mat-dialog-close","",1,"btn","btn-sm","m-1"],[1,"fa","fa-window-close"],["mat-raised-button","","mat-dialog-close","","class","btn btn-sm bg-danger m-1",3,"click",4,"ngIf"],["mat-raised-button","","mat-dialog-close","",1,"btn","btn-sm","bg-danger","m-1",3,"click"],[1,"fa","fa-trash"]],template:function(n,l){1&n&&(e.TgZ(0,"h5",0),e._uU(1),e.qZA(),e.TgZ(2,"mat-dialog-content",1)(3,"div",2)(4,"div",3)(5,"p"),e._uU(6),e.ALo(7,"formatNames"),e.qZA()()()(),e.TgZ(8,"mat-dialog-actions",4)(9,"button",5),e._UZ(10,"i",6),e._uU(11,"Close "),e.qZA(),e.YNc(12,Z,3,0,"button",7),e.YNc(13,T,3,0,"button",7),e.qZA()),2&n&&(e.xp6(1),e.AsE(" ",l.dialogData.action," ",l.dialogData.context,"\n"),e.xp6(5),e.hij(" Are you sure to delete ",e.lcZ(7,5,l.dialogData.name),"? "),e.xp6(6),e.Q6J("ngIf","Caretaker"==l.dialogData.context),e.xp6(1),e.Q6J("ngIf","User"==l.dialogData.context))},dependencies:[p.O5,r.ZT,r.uh,r.xY,r.H8,f.lW,D.Q],styles:["h5[_ngcontent-%COMP%], mat-dialog-content[_ngcontent-%COMP%], mat-dialog-actions[_ngcontent-%COMP%]{background-color:#faad47!important;color:red!important}"]}),g})()},7156:(I,E,t)=>{t.d(E,{L:()=>b});var r=t(4006),m=t(5412),e=t(4650),v=t(5496),P=t(9201),A=t(6467),C=t(1213),h=t(6895),p=t(3546),f=t(9549),D=t(4385),Z=t(3238),T=t(4144);function U(a,c){if(1&a&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&a){const s=c.$implicit;e.Q6J("value",s),e.xp6(1),e.hij(" ",s," ")}}function _(a,c){if(1&a&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&a){const s=c.$implicit;e.Q6J("value",s),e.xp6(1),e.hij(" ",s," ")}}function g(a,c){if(1&a){const s=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(s);const i=e.oxw();return e.KtG(i.addProperty())}),e._UZ(1,"i",25),e._uU(2," Add! "),e.qZA()}}function d(a,c){if(1&a){const s=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(s);const i=e.oxw();return e.KtG(i.editProperty())}),e._UZ(1,"i",26),e._uU(2," Edit! "),e.qZA()}}function n(a,c){if(1&a){const s=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(s);const i=e.oxw();return e.KtG(i.deleteProperty())}),e._UZ(1,"i",28),e._uU(2," Delete! "),e.qZA()}}const l=function(){return[!0,!1]};let b=(()=>{var a;class c{constructor(o,i,M,O,y,x,u){this.formBuilder=o,this.storageService=i,this.dialog=M,this.msgService=O,this.houseEntityService=y,this.userEntityService=x,this.dialogData=u,this.houseTypes=["appartment","single rooms","self contained rooms","family house"],this.houseDetailsForm=this.formBuilder.group({owner_Id:[u.user._id,r.kI.required],_id:[u.estate._id],admin_Id:["lga"===i.getUserTypeName().toLowerCase()?i.getId():void 0],region:["",r.kI.required],district:["",r.kI.required],ward:["",r.kI.required],street:["",r.kI.required],type:["",r.kI.required],open:[!1,r.kI.required],rooms:[0,r.kI.required],caretakerPhoneNo:[""],description:["",r.kI.required]}),this.dialogData&&(this.action=u.action,this.houseDetailsForm.patchValue(u.estate),u.estate.caretakers&&u.estate.caretakers.length>0?this.houseDetailsForm.get("caretakerPhoneNo")?.patchValue(u.estate.caretakers[0].userInfos.phoneNumber):this.houseDetailsForm.get("caretakerPhoneNo")?.patchValue(""))}addProperty(){this.houseDetailsForm.valid?(console.log(this.houseDetailsForm.value),this.houseEntityService.add(this.houseDetailsForm.value).subscribe({next:o=>{console.log(o),this.dialog.closeAll(),this.userEntityService.getAll()},error:o=>{console.log(o),this.msgService.message({text:o.message,title:"Property Register Failure",color:"red"})}})):this.msgService.message({text:"Please make sure to fill the form correctly before submit",title:"Property Register Failure",color:"red"})}editProperty(){this.houseDetailsForm.valid?(console.log(this.houseDetailsForm.value),this.houseEntityService.update(this.houseDetailsForm.value).subscribe({next:o=>{console.log(o),this.dialog.closeAll(),this.userEntityService.getAll()},error:o=>{console.log(o),this.msgService.message({text:o.message,title:"Property Register Failure",color:"red"})}})):this.msgService.message({text:"Please make sure to fill the form correctly before submit",title:"Property Edit Failure",color:"red"})}deleteProperty(){this.houseEntityService.delete(this.houseDetailsForm.value).subscribe({next:o=>{console.log(o),this.dialog.closeAll()},error:o=>{console.log(o),this.msgService.message({text:o.message,title:"Property Register Failure",color:"red"})}})}}return(a=c).\u0275fac=function(o){return new(o||a)(e.Y36(r.qu),e.Y36(v.V),e.Y36(m.uw),e.Y36(P.e),e.Y36(A.k),e.Y36(C.W),e.Y36(m.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-add-properties"]],decls:63,vars:7,consts:[[1,"col-12"],[1,"d-flex","justify-content-center"],["mat-dialog-title",""],["src","/assets/login.PNG","alt","Logo","height","75px","width","75px",1,"brand_logo"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"w-100"],["name","region","matInput","","type","text","placeholder","Region","formControlName","region"],["name","district","matInput","","type","text","placeholder","District","formControlName","district"],["name","ward","matInput","","type","text","placeholder","ward","formControlName","ward"],["name","street","matInput","","type","text","placeholder","street","formControlName","street"],[1,"fa","fa-user-plus"],["placeholder","house type","formControlName","type","name","type"],[3,"value",4,"ngFor","ngForOf"],["placeholder","open","formControlName","open","name","open"],["name","rooms","matInput","","type","number","placeholder","rooms","formControlName","rooms"],["name","caretakerPhoneNo","matInput","","type","text","placeholder","caretakerPhoneNo","formControlName","caretakerPhoneNo"],["name","description","matInput","","placeholder","short descriptions","cols","10","rows","3","formControlName","description"],["mat-dialog-close","",1,"btn","btn-sm"],[1,"fa","fa-window-close"],["class","btn btn-sm m-1 bg-warning",3,"click",4,"ngIf"],["class","btn btn-sm m-1 bg-danger",3,"click",4,"ngIf"],[3,"value"],[1,"btn","btn-sm","m-1","bg-warning",3,"click"],[1,"fa","fa-plus-circle"],[1,"fa","fa-edit"],[1,"btn","btn-sm","m-1","bg-danger",3,"click"],[1,"fa","fa-trash"]],template:function(o,i){1&o&&(e.TgZ(0,"mat-dialog-content",0)(1,"mat-card")(2,"mat-card-header",1)(3,"h3",2),e._UZ(4,"img",3),e.qZA()(),e.TgZ(5,"mat-card-content",1)(6,"form",4)(7,"div",5)(8,"div",6)(9,"mat-form-field",7)(10,"mat-label"),e._uU(11,"Region"),e.qZA(),e._UZ(12,"input",8),e.qZA()(),e.TgZ(13,"div",6)(14,"mat-form-field",7)(15,"mat-label"),e._uU(16,"District"),e.qZA(),e._UZ(17,"input",9),e.qZA()(),e.TgZ(18,"div",6)(19,"mat-form-field",7)(20,"mat-label"),e._uU(21,"Ward"),e.qZA(),e._UZ(22,"input",10),e.qZA()(),e.TgZ(23,"div",6)(24,"mat-form-field",7)(25,"mat-label"),e._uU(26,"Street"),e.qZA(),e._UZ(27,"input",11),e.qZA()(),e.TgZ(28,"div",6)(29,"mat-form-field",7)(30,"mat-label"),e._UZ(31,"i",12),e._uU(32," House Type"),e.qZA(),e.TgZ(33,"mat-select",13),e.YNc(34,U,2,2,"mat-option",14),e.qZA()()(),e.TgZ(35,"div",6)(36,"mat-form-field",7)(37,"mat-label"),e._uU(38,"Open"),e.qZA(),e.TgZ(39,"mat-select",15),e.YNc(40,_,2,2,"mat-option",14),e.qZA()()(),e.TgZ(41,"div",6)(42,"mat-form-field",7)(43,"mat-label"),e._uU(44,"Rooms"),e.qZA(),e._UZ(45,"input",16),e.qZA()(),e.TgZ(46,"div",6)(47,"mat-form-field",7)(48,"mat-label"),e._uU(49,"caretakerPhoneNo"),e.qZA(),e._UZ(50,"input",17),e.qZA()(),e.TgZ(51,"div",6)(52,"mat-form-field",7)(53,"mat-label"),e._uU(54,"Descriptions"),e.qZA(),e._UZ(55,"textarea",18),e.qZA()()()()()()(),e.TgZ(56,"mat-dialog-actions",1)(57,"button",19),e._UZ(58,"i",20),e._uU(59,"Close "),e.qZA(),e.YNc(60,g,3,0,"button",21),e.YNc(61,d,3,0,"button",21),e.YNc(62,n,3,0,"button",22),e.qZA()),2&o&&(e.xp6(6),e.Q6J("formGroup",i.houseDetailsForm),e.xp6(28),e.Q6J("ngForOf",i.houseTypes),e.xp6(6),e.Q6J("ngForOf",e.DdM(6,l)),e.xp6(20),e.Q6J("ngIf","add"===i.action),e.xp6(1),e.Q6J("ngIf","edit"===i.action),e.xp6(1),e.Q6J("ngIf","delete"===i.action))},dependencies:[h.sg,h.O5,r._Y,r.Fj,r.wV,r.JJ,r.JL,p.a8,p.dn,p.dk,f.KE,f.hX,D.gD,Z.ey,r.sg,r.u,T.Nt,m.ZT,m.uh,m.xY,m.H8]}),c})()}}]);