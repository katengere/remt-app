"use strict";(self.webpackChunkremt_ui=self.webpackChunkremt_ui||[]).push([[592],{7156:(x,u,s)=>{s.d(u,{L:()=>U});var o=s(4006),c=s(5412),e=s(4650),p=s(5496),g=s(9201),h=s(6467),f=s(1213),m=s(6895),_=s(3546),d=s(9549),P=s(4385),Z=s(3238),A=s(4144);function v(r,n){if(1&r&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&r){const a=n.$implicit;e.Q6J("value",a),e.xp6(1),e.hij(" ",a," ")}}function b(r,n){if(1&r&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&r){const a=n.$implicit;e.Q6J("value",a),e.xp6(1),e.hij(" ",a," ")}}function E(r,n){if(1&r){const a=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(a);const i=e.oxw();return e.KtG(i.addProperty())}),e._UZ(1,"i",24),e._uU(2," Add! "),e.qZA()}}function C(r,n){if(1&r){const a=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(a);const i=e.oxw();return e.KtG(i.editProperty())}),e._UZ(1,"i",25),e._uU(2," Edit! "),e.qZA()}}function T(r,n){if(1&r){const a=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(a);const i=e.oxw();return e.KtG(i.deleteProperty())}),e._UZ(1,"i",27),e._uU(2," Delete! "),e.qZA()}}const y=function(){return[!0,!1]};let U=(()=>{var r;class n{constructor(t,i,D,I,O,M,l){this.formBuilder=t,this.storageService=i,this.dialog=D,this.msgService=I,this.houseEntityService=O,this.userEntityService=M,this.dialogData=l,this.houseTypes=["appartment","single rooms","self contained rooms","family house"],this.houseDetailsForm=this.formBuilder.group({owner_Id:[l.user._id,o.kI.required],_id:[l.estate._id],admin_Id:["lga"===i.getUserTypeName().toLowerCase()?i.getId():void 0],region:["",o.kI.required],district:["",o.kI.required],ward:["",o.kI.required],street:["",o.kI.required],type:["",o.kI.required],open:[!1,o.kI.required],rooms:[0,o.kI.required],caretakerPhoneNo:[""],description:["",o.kI.required]}),this.dialogData&&(this.action=l.action,this.houseDetailsForm.patchValue(l.estate),l.estate.caretakers&&l.estate.caretakers.length>0?this.houseDetailsForm.get("caretakerPhoneNo")?.patchValue(l.estate.caretakers[0].userInfos.phoneNumber):this.houseDetailsForm.get("caretakerPhoneNo")?.patchValue(""))}addProperty(){this.houseDetailsForm.valid?(console.log(this.houseDetailsForm.value),this.houseEntityService.add(this.houseDetailsForm.value).subscribe({next:t=>{console.log(t),this.dialog.closeAll(),this.userEntityService.getAll()},error:t=>{console.log(t),this.msgService.message({text:t.message,title:"Property Register Failure",color:"red"})}})):this.msgService.message({text:"Please make sure to fill the form correctly before submit",title:"Property Register Failure",color:"red"})}editProperty(){this.houseDetailsForm.valid?(console.log(this.houseDetailsForm.value),this.houseEntityService.update(this.houseDetailsForm.value).subscribe({next:t=>{console.log(t),this.dialog.closeAll(),this.userEntityService.getAll()},error:t=>{console.log(t),this.msgService.message({text:t.message,title:"Property Register Failure",color:"red"})}})):this.msgService.message({text:"Please make sure to fill the form correctly before submit",title:"Property Edit Failure",color:"red"})}deleteProperty(){this.houseEntityService.delete(this.houseDetailsForm.value).subscribe({next:t=>{console.log(t),this.dialog.closeAll()},error:t=>{console.log(t),this.msgService.message({text:t.message,title:"Property Register Failure",color:"red"})}})}}return(r=n).\u0275fac=function(t){return new(t||r)(e.Y36(o.qu),e.Y36(p.V),e.Y36(c.uw),e.Y36(g.e),e.Y36(h.k),e.Y36(f.W),e.Y36(c.WI))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-properties"]],decls:66,vars:7,consts:[["mat-dialog-title","","align","center"],["src","../../../../favicon.ico","alt","Logo","height","75px","width","75px",1,"brand_logo"],[1,"d-flex","justify-content-center"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"w-100"],["name","region","matInput","","type","text","placeholder","Region","formControlName","region"],["name","district","matInput","","type","text","placeholder","District","formControlName","district"],["name","ward","matInput","","type","text","placeholder","ward","formControlName","ward"],["name","street","matInput","","type","text","placeholder","street","formControlName","street"],[1,"fa","fa-user-plus"],["placeholder","house type","formControlName","type","name","type"],[3,"value",4,"ngFor","ngForOf"],["placeholder","open","formControlName","open","name","open"],["name","rooms","matInput","","type","number","placeholder","rooms","formControlName","rooms"],["name","caretakerPhoneNo","matInput","","type","text","placeholder","caretakerPhoneNo","formControlName","caretakerPhoneNo"],["name","description","matInput","","placeholder","short descriptions","cols","10","rows","3","formControlName","description"],["mat-dialog-close","",1,"btn","btn-sm","close"],[1,"fa","fa-window-close"],["class","btn btn-sm m-1 add",3,"click",4,"ngIf"],["class","btn btn-sm m-1 close",3,"click",4,"ngIf"],[3,"value"],[1,"btn","btn-sm","m-1","add",3,"click"],[1,"fa","fa-plus-circle"],[1,"fa","fa-edit"],[1,"btn","btn-sm","m-1","close",3,"click"],[1,"fa","fa-trash"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-dialog-content")(1,"h2",0),e._UZ(2,"img",1)(3,"br"),e.TgZ(4,"small")(5,"b"),e._uU(6,"Add House"),e.qZA()()(),e.TgZ(7,"mat-card")(8,"mat-card-content",2)(9,"form",3)(10,"div",4)(11,"div",5)(12,"mat-form-field",6)(13,"mat-label"),e._uU(14,"Region"),e.qZA(),e._UZ(15,"input",7),e.qZA()(),e.TgZ(16,"div",5)(17,"mat-form-field",6)(18,"mat-label"),e._uU(19,"District"),e.qZA(),e._UZ(20,"input",8),e.qZA()(),e.TgZ(21,"div",5)(22,"mat-form-field",6)(23,"mat-label"),e._uU(24,"Ward"),e.qZA(),e._UZ(25,"input",9),e.qZA()(),e.TgZ(26,"div",5)(27,"mat-form-field",6)(28,"mat-label"),e._uU(29,"Street"),e.qZA(),e._UZ(30,"input",10),e.qZA()(),e.TgZ(31,"div",5)(32,"mat-form-field",6)(33,"mat-label"),e._UZ(34,"i",11),e._uU(35," House Type"),e.qZA(),e.TgZ(36,"mat-select",12),e.YNc(37,v,2,2,"mat-option",13),e.qZA()()(),e.TgZ(38,"div",5)(39,"mat-form-field",6)(40,"mat-label"),e._uU(41,"Open"),e.qZA(),e.TgZ(42,"mat-select",14),e.YNc(43,b,2,2,"mat-option",13),e.qZA()()(),e.TgZ(44,"div",5)(45,"mat-form-field",6)(46,"mat-label"),e._uU(47,"Rooms"),e.qZA(),e._UZ(48,"input",15),e.qZA()(),e.TgZ(49,"div",5)(50,"mat-form-field",6)(51,"mat-label"),e._uU(52,"caretakerPhoneNo"),e.qZA(),e._UZ(53,"input",16),e.qZA()(),e.TgZ(54,"div",5)(55,"mat-form-field",6)(56,"mat-label"),e._uU(57,"Descriptions"),e.qZA(),e._UZ(58,"textarea",17),e.qZA()()()()()()(),e.TgZ(59,"mat-dialog-actions",2)(60,"button",18),e._UZ(61,"i",19),e._uU(62,"Close "),e.qZA(),e.YNc(63,E,3,0,"button",20),e.YNc(64,C,3,0,"button",20),e.YNc(65,T,3,0,"button",21),e.qZA()),2&t&&(e.xp6(9),e.Q6J("formGroup",i.houseDetailsForm),e.xp6(28),e.Q6J("ngForOf",i.houseTypes),e.xp6(6),e.Q6J("ngForOf",e.DdM(6,y)),e.xp6(20),e.Q6J("ngIf","add"===i.action),e.xp6(1),e.Q6J("ngIf","edit"===i.action),e.xp6(1),e.Q6J("ngIf","delete"===i.action))},dependencies:[m.sg,m.O5,o._Y,o.Fj,o.wV,o.JJ,o.JL,_.a8,_.dn,d.KE,d.hX,P.gD,Z.ey,o.sg,o.u,A.Nt,c.ZT,c.uh,c.xY,c.H8],styles:["mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:bisque;color:#000}mat-dialog-actions[_ngcontent-%COMP%]   button.add[_ngcontent-%COMP%]{background-color:bisque;border:1px solid green;color:green}mat-dialog-actions[_ngcontent-%COMP%]   button.close[_ngcontent-%COMP%]{background-color:bisque;border:1px solid red;color:red}img[_ngcontent-%COMP%]{border-radius:50%}"]}),n})()}}]);