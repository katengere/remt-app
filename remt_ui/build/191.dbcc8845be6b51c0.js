"use strict";(self.webpackChunkremt_ui=self.webpackChunkremt_ui||[]).push([[191],{3191:(X,c,n)=>{n.r(c),n.d(c,{MainAdminModule:()=>z});var f=n(6895),C=n(3267),g=n(8252),L=n(7732),Z=n(5266),M=n(9841),e=n(4650),v=n(1213),U=n(5496),A=n(3803),T=n(5004);const x=function(){return[800,400]};let w=(()=>{var s;class o{constructor(r,d){this.userEntityService=r,this.storageService=d,this.usersTotalByAdmin=0,this.usersTotal=0,this.estatesTotal=0,(0,M.a)([this.userEntityService.getByKey(d.getId()),r.entities$]).subscribe({next:([p,h])=>{this.usersTotalByAdmin=p.regUserIds?.length,this.usersTotal=h.length,this.estatesTotal=p.regEstateIds.reduce((t,a)=>t+a.length,0),this.estates=p.estates.reduce((t,a)=>null!==t?[...t,...a.estates]:[...t],[]).reduce((t,a)=>{let m={name:a.street.toLowerCase(),value:0};if(!t.includes(t[t.findIndex(u=>u.name.toLowerCase()==a.street.toLowerCase())]))return m.value+=1,[...t,m];const l=t.find(u=>u.name.toLowerCase()==a.street.toLowerCase());return l?(l.value+=1,t.splice(t.findIndex(u=>u.name.toLowerCase()==l.name.toLowerCase()),1,l),[...t]):t},[]),this.users=p.regUserIds.reduce((t,a)=>{let m={name:a.userTypeName.toLowerCase(),value:0};if(!t.includes(t[t.findIndex(u=>u.name.toLowerCase()==a.userTypeName.toLowerCase())]))return m.value+=1,[...t,m];const l=t.find(u=>u.name.toLowerCase()==a.userTypeName.toLowerCase());return l?(l.value+=1,t.splice(t.findIndex(u=>u.name.toLowerCase()==l.name.toLowerCase()),1,l),[...t]):t},[])}})}ngOnInit(){}}return(s=o).\u0275fac=function(r){return new(r||s)(e.Y36(v.W),e.Y36(U.V))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-main-admin-home"]],decls:27,vars:30,consts:[[1,"container-fluid"],[1,"row","pt-2"],[1,"col-12"],[1,"card","text-left"],[1,"card-body"],[1,"card-title","border-bottom","text-center","text-capitalize"],[1,"d-flex","justify-content-between"],[3,"view","results","xAxisLabel","legendTitle","yAxisLabel","legend","showXAxisLabel","showYAxisLabel","xAxis","yAxis","gradient"],[1,"card-title","border-bottom","d-flex","justify-content-between"]],template:function(r,d){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5)(6,"span"),e._uU(7,"User Types Summary Chart"),e.qZA()(),e._UZ(8,"br"),e.TgZ(9,"h6",6)(10,"span")(11,"span"),e._uU(12),e.qZA()(),e.TgZ(13,"small"),e._uU(14),e.ALo(15,"formatNames"),e.qZA()(),e._UZ(16,"br")(17,"ngx-charts-bar-vertical",7),e.qZA()()(),e.TgZ(18,"div",2)(19,"div",3)(20,"div",4)(21,"h4",8)(22,"span"),e._uU(23,"Houses per Street Chart"),e.qZA(),e.TgZ(24,"span"),e._uU(25),e.qZA()(),e._UZ(26,"ngx-charts-bar-vertical",7),e.qZA()()()()()),2&r&&(e.xp6(12),e.hij("Total Users: ",d.usersTotal,""),e.xp6(2),e.AsE("Users Registered By Admin ",e.lcZ(15,26,d.storageService.getUserName()),": ",d.usersTotalByAdmin,""),e.xp6(3),e.Q6J("view",e.DdM(28,x))("results",d.users)("xAxisLabel","Users")("legendTitle","User Type Chart")("yAxisLabel","Amount")("legend",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("xAxis",!0)("yAxis",!0)("gradient",!0),e.xp6(8),e.hij("Total Estates : ",d.estatesTotal,""),e.xp6(1),e.Q6J("view",e.DdM(29,x))("results",d.estates)("xAxisLabel","Estates")("legendTitle","Estates Chart")("yAxisLabel","Amount")("legend",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("xAxis",!0)("yAxis",!0)("gradient",!0))},dependencies:[A.K$,T.Q]}),o})();var N=n(6451),I=n(6180);const b=function(s,o){return["/admin/",s,"manage_users",o]};function S(s,o){if(1&s&&(e.TgZ(0,"tr")(1,"td")(2,"div",6)(3,"a",7)(4,"div",8)(5,"h5",9),e._uU(6),e.ALo(7,"formatNames"),e.qZA(),e.TgZ(8,"small"),e._uU(9),e.qZA()(),e.TgZ(10,"p",9),e._uU(11,"Some placeholder content in a paragraph."),e.qZA(),e.TgZ(12,"small"),e._uU(13,"And some small print."),e.qZA()()()()()),2&s){const i=o.$implicit,r=e.oxw(2);e.xp6(3),e.Q6J("routerLink",e.WLB(5,b,r.paramId,i._id)),e.xp6(3),e.hij("Name: ",e.lcZ(7,3,i.userInfos.name),""),e.xp6(3),e.hij("Phone No: ",i.userInfos.phoneNumber,"")}}function B(s,o){if(1&s&&(e.ynx(0),e.TgZ(1,"tr")(2,"th",5),e._uU(3),e.qZA()(),e.YNc(4,S,14,8,"tr",4),e.BQk()),2&s){const i=o.$implicit;e.xp6(2),e.uIk("rowspan",i.users.length+1),e.xp6(1),e.Oqu(i.userTypeName),e.xp6(1),e.Q6J("ngForOf",i.users)}}let E=(()=>{var s;class o{constructor(r,d,p){this.userEntityService=r,this.route=d,this.userDataService=p,(0,N.T)(this.userEntityService.entities$,this.userEntityService.filteredEntities$).subscribe({next:h=>{this.paramId=this.route.snapshot.parent?.params.id,this.users=h.reduce((t,a)=>{let m={userTypeName:a.userTypeName.toLowerCase(),users:[]};if(!t.includes(t[t.findIndex(u=>u.userTypeName.toLowerCase()==a.userTypeName.toLowerCase())]))return m.users.push(a),[...t,m];const l=t.find(u=>u.userTypeName.toLowerCase()==a.userTypeName.toLowerCase());return l?(l.users.push(a),t.splice(t.findIndex(u=>u.userTypeName.toLowerCase()==l.userTypeName.toLowerCase()),1,l),[...t]):t},[]),console.log(h)}})}}return(s=o).\u0275fac=function(r){return new(r||s)(e.Y36(v.W),e.Y36(g.gz),e.Y36(I.M))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-mng-users"]],decls:10,vars:1,consts:[[1,"table-responsive"],[1,"table"],["scope","col"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],["scope","row"],[1,"list-group"],["aria-current","true",1,"list-group-item","list-group-item-action",3,"routerLink"],[1,"d-flex","w-100","justify-content-between"],[1,"mb-1"]],template:function(r,d){1&r&&(e.TgZ(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),e._uU(5,"User Type"),e.qZA(),e.TgZ(6,"th",3),e._uU(7,"Details"),e.qZA()()(),e.TgZ(8,"tbody"),e.YNc(9,B,5,3,"ng-container",4),e.qZA()()()),2&r&&(e.xp6(9),e.Q6J("ngForOf",d.users))},dependencies:[f.sg,g.rH,T.Q],styles:[".list-group[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{background-color:#deb887;font-weight:lighter}.list-group[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{background-color:bisque}"]}),o})();var O=n(3476);const Y=[{path:"",component:L.P,children:[{path:"",component:w},{path:"profile",component:Z.d},{path:"manage_users",component:E},{path:"manage_users/:id",component:O.L},{path:"**",redirectTo:"",pathMatch:"full"}]}];let F=(()=>{var s;class o{}return(s=o).\u0275fac=function(r){return new(r||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[g.Bz.forChild(Y),g.Bz]}),o})();var J=n(7392),Q=n(3683),P=n(4859),H=n(4633),$=n(4466);let z=(()=>{var s;class o{}return(s=o).\u0275fac=function(r){return new(r||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[f.ez,F,J.Ps,C.SJ,Q.g0,P.ot,H.ie,$.m,A.a4]}),o})()}}]);